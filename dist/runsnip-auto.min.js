/*! runsnip v0.2.1 | (c) 2022-2024 RÃ©mino Rem <https://remino.net/> | ISC Licence */
(function(f){typeof define==='function'&&define.amd?define(f):f();})((function(){'use strict';const create=(e,t=document)=>t.createElement(e);const sel=document.querySelector.bind(document);const selOrCreate=(e,t)=>sel(e)||create(t);class i extends HTMLElement{connectedCallback(){this.htmlEl=selOrCreate(this.getAttribute("html"),"div"),this.cssEl=selOrCreate(this.getAttribute("css"),"style"),this.jsEl=selOrCreate(this.getAttribute("js"),"script"),this.headEl=selOrCreate(this.getAttribute("head"),"head"),this.outputEl=selOrCreate(this.getAttribute("output"),"output"),this.appendEl=sel(this.getAttribute("append")),this.submitEl=selOrCreate(this.getAttribute("submit"),"button"),this.submitEl.getAttribute("type")||this.submitEl.setAttribute("type","submit"),"INPUT"===this.submitEl.tagName?this.submitEl.value=this.textContent||"Run":this.submitEl.innerHTML=this.innerHTML||"Run";const i=this.submitEl.form||create("form");document.contains(i)?document.contains(this.submitEl)||this.appendChild(this.submitEl):(this.appendChild(i),document.contains(this.submitEl)||i.appendChild(this.submitEl)),i.addEventListener("submit",this.submit.bind(this));}get html(){return this.htmlEl.value||this.htmlEl.innerHTML}get head(){return this.headEl.value||this.headEl.innerHTML}get css(){return this.cssEl.value||this.cssEl.textContent}get js(){return this.jsEl.value||this.jsEl.textContent}render(s){const{contentDocument:e}=s,i=create("style",e);i.textContent=this.css;const n=create("script",e);n.setAttribute("crossorigin",""),n.setAttribute("defer",""),n.textContent=this.js,e.head.innerHTML=this.head,e.head.appendChild(i),e.body.innerHTML=this.html,e.body.appendChild(n);}run(){document.contains(this.outputEl)||(this.appendEl?this.appendEl.contains(this.outputEl)||this.appendEl.appendChild(this.outputEl):this.insertAdjacentElement("afterend",this.outputEl));const s=create("iframe");s.setAttribute("sandbox","allow-scripts allow-same-origin"),s.setAttribute("srcdoc","<!DOCTYPE html>"),this.outputEl.innerHTML="",this.outputEl.appendChild(s),s.addEventListener("load",(()=>this.render(s)));}submit(t){t.preventDefault(),t.stopPropagation(),this.run();}}var t = ()=>{customElements.define("run-snip",i);};"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t);}));